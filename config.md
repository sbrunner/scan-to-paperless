# Configuration

## Properties

- <a id="properties/extends"></a>**`extends`** *(string)*: The configuration to extends.
- <a id="properties/merge_strategies"></a>**`merge_strategies`** *(object)*: The merge strategy to use, see https://deepmerge.readthedocs.io/en/latest/strategies.html#builtin-strategies.
  - <a id="properties/merge_strategies/properties/for_list"></a>**`for_list`** *(array)*: The merge strategy to use on list. Default: `["override"]`.
    - <a id="properties/merge_strategies/properties/for_list/items"></a>**Items** *(string)*
  - <a id="properties/merge_strategies/properties/for_dict"></a>**`for_dict`** *(array)*: The merge strategy to use on dict. Default: `["merge"]`.
    - <a id="properties/merge_strategies/properties/for_dict/items"></a>**Items** *(string)*
  - <a id="properties/merge_strategies/properties/fallback"></a>**`fallback`** *(array)*: The fallback merge strategy. Default: `["override"]`.
    - <a id="properties/merge_strategies/properties/fallback/items"></a>**Items** *(string)*
  - <a id="properties/merge_strategies/properties/type_conflict"></a>**`type_conflict`** *(array)*: The type_conflict merge strategy. Default: `["override"]`.
    - <a id="properties/merge_strategies/properties/type_conflict/items"></a>**Items** *(string)*
- <a id="properties/scan_folder"></a>**`scan_folder`** *(string)*: This should be shared with the process container in 'source'.
- <a id="properties/scanimage"></a>**`scanimage`** *(string)*: The scanimage command. Default: `"scanimage"`.
- <a id="properties/scanimage_arguments"></a>**`scanimage_arguments`** *(array)*: The scanimage arguments. Default: `["--format=png", "--mode=color", "--resolution=300"]`.
  - <a id="properties/scanimage_arguments/items"></a>**Items** *(string)*
- <a id="properties/extension"></a>**`extension`** *(string)*: The extension of generate image (png or tiff). Default: `"png"`.
- <a id="properties/default_args"></a>**`default_args`**: Refer to *[#/definitions/args](#definitions/args)*.
- <a id="properties/viewer"></a>**`viewer`** *(string)*: The command used to start the viewer. Default: `"eog"`.
- <a id="properties/modes"></a>**`modes`** *(object)*: Customize the modes. Can contain additional properties. Default: `{"adf": {"scanimage_arguments": ["--source=ADF"]}, "double": {"scanimage_arguments": ["--source=ADF"], "auto_bash": true, "rotate_even": true}, "multi": {"scanimage_arguments": ["--batch-prompt"]}, "one": {"scanimage_arguments": ["--batch-count=1"]}}`.
  - <a id="properties/modes/additionalProperties"></a>**Additional properties** *(object)*
    - <a id="properties/modes/additionalProperties/properties/scanimage_arguments"></a>**`scanimage_arguments`** *(array)*: Additional scanimage arguments.
      - <a id="properties/modes/additionalProperties/properties/scanimage_arguments/items"></a>**Items** *(string)*
    - <a id="properties/modes/additionalProperties/properties/auto_bash"></a>**`auto_bash`** *(boolean)*: Run the ADF in tow step odd and even, needed for scanner that don't support double face. Default: `false`.
    - <a id="properties/modes/additionalProperties/properties/rotate_even"></a>**`rotate_even`** *(boolean)*: Rotate the even pages, to use in conjunction with auto_bash. Default: `false`.
## Definitions

- <a id="definitions/auto_mask"></a>**`auto_mask`** *(object)*
  - <a id="definitions/auto_mask/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the auto detection of the mask. Default: `true`.
  - <a id="definitions/auto_mask/properties/lower_hsv_color"></a>**`lower_hsv_color`** *(array)*: The lower color in HSV representation. Default: `[0, 0, 250]`.
    - <a id="definitions/auto_mask/properties/lower_hsv_color/items"></a>**Items** *(integer)*
  - <a id="definitions/auto_mask/properties/upper_hsv_color"></a>**`upper_hsv_color`** *(array)*: The upper color in HSV representation. Default: `[255, 10, 255]`.
    - <a id="definitions/auto_mask/properties/upper_hsv_color/items"></a>**Items** *(integer)*
  - <a id="definitions/auto_mask/properties/de_noise_morphology"></a>**`de_noise_morphology`** *(boolean)*: Apply a morphology operation to remove noise. Default: `true`.
  - <a id="definitions/auto_mask/properties/inverse_mask"></a>**`inverse_mask`** *(boolean)*: Inverse the mask. Default: `false`.
  - <a id="definitions/auto_mask/properties/de_noise_size"></a>**`de_noise_size`** *(integer)*: The size of the artifact that will be de noise. Default: `1000`.
  - <a id="definitions/auto_mask/properties/de_noise_level"></a>**`de_noise_level`** *(integer)*: The threshold level used in de noise on the blurry image. Default: `220`.
  - <a id="definitions/auto_mask/properties/buffer_size"></a>**`buffer_size`** *(integer)*: The size of the buffer add on the mask. Default: `20`.
  - <a id="definitions/auto_mask/properties/buffer_level"></a>**`buffer_level`** *(integer)*: The threshold level used in buffer on the blurry image. Default: `20`.
- <a id="definitions/args"></a>**`args`** *(object)*: Cannot contain additional properties.
  - <a id="definitions/args/properties/level"></a>**`level`** *(object)*: The level configuration.
    - <a id="definitions/args/properties/level/properties/value"></a>**`value`** *(boolean or integer)*: true: => do level on 15% - 85% (under 15 % will be black above 85% will be white), false: => 0% - 100%, <number>: => (0 + <number>)% - (100 - number)%. Default: `false`.
    - <a id="definitions/args/properties/level/properties/auto"></a>**`auto`** *(boolean)*: If no level specified, do auto level. Default: `false`.
    - <a id="definitions/args/properties/level/properties/min"></a>**`min`** *(number)*: Min level if no level end no auto-level. Default: `0`.
    - <a id="definitions/args/properties/level/properties/max"></a>**`max`** *(number)*: Max level if no level end no auto-level. Default: `100`.
  - <a id="definitions/args/properties/cut_white"></a>**`cut_white`** *(number)*: Set the near white pixels on the image to white. Default: `255`.
  - <a id="definitions/args/properties/cut_black"></a>**`cut_black`** *(number)*: Set the near black pixels on the image to black. Default: `0`.
  - <a id="definitions/args/properties/crop"></a>**`crop`** *(object)*: The crop configuration.
    - <a id="definitions/args/properties/crop/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the crop. Default: `true`.
    - <a id="definitions/args/properties/crop/properties/margin_horizontal"></a>**`margin_horizontal`** *(number)*: The horizontal margin used on auto-detect content [mm]. Default: `9`.
    - <a id="definitions/args/properties/crop/properties/margin_vertical"></a>**`margin_vertical`** *(number)*: The vertical margin used on auto-detect content [mm]. Default: `6`.
    - <a id="definitions/args/properties/crop/properties/contour"></a>**`contour`**: Refer to *[#/definitions/contour](#definitions/contour)*.
  - <a id="definitions/args/properties/dpi"></a>**`dpi`** *(number)*: The DPI used to convert the mm to pixel. Default: `300`.
  - <a id="definitions/args/properties/sharpen"></a>**`sharpen`** *(object)*: Sharpen configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/sharpen/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the sharpen. Default: `true`.
  - <a id="definitions/args/properties/dither"></a>**`dither`** *(object)*: The dither configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/dither/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the dither. Default: `true`.
  - <a id="definitions/args/properties/tesseract"></a>**`tesseract`** *(object)*: The Tesseract configuration.
    - <a id="definitions/args/properties/tesseract/properties/enabled"></a>**`enabled`** *(boolean)*: Use Tesseract to to an OCR on the document. Default: `true`.
    - <a id="definitions/args/properties/tesseract/properties/lang"></a>**`lang`** *(string)*: The used language for tesseract. Default: `"fra+eng"`.
  - <a id="definitions/args/properties/append_credit_card"></a>**`append_credit_card`** *(boolean)*: Do an assisted split. Default: `false`.
  - <a id="definitions/args/properties/assisted_split"></a>**`assisted_split`** *(boolean)*: Do an assisted split. Default: `false`.
  - <a id="definitions/args/properties/empty"></a>**`empty`** *(object)*: The empty page detection configuration.
    - <a id="definitions/args/properties/empty/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the empty page detection. Default: `true`.
    - <a id="definitions/args/properties/empty/properties/contour"></a>**`contour`**: Refer to *[#/definitions/contour](#definitions/contour)*.
  - <a id="definitions/args/properties/limit_detection"></a>**`limit_detection`** *(object)*: The limit page detection configuration.
    - <a id="definitions/args/properties/limit_detection/properties/contour"></a>**`contour`**: Refer to *[#/definitions/contour](#definitions/contour)*.
    - <a id="definitions/args/properties/limit_detection/properties/line"></a>**`line`** *(object)*: The line detection used in assisted split.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/low_threshold"></a>**`low_threshold`** *(integer)*: The low threshold used in the Canny edge detector. Default: `0`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/high_threshold"></a>**`high_threshold`** *(integer)*: The high threshold used in the Canny edge detector. Default: `1000`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/aperture_size"></a>**`aperture_size`** *(integer)*: The aperture size used in the Canny edge detector. Default: `3`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/rho"></a>**`rho`** *(integer)*: The rho used in the Hough transform. Default: `1`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/threshold"></a>**`threshold`** *(integer)*: The threshold used in the Hough transform. Default: `100`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/min_line_length"></a>**`min_line_length`** *(integer)*: The minimum line length in percentage of the image size used in the Hough transform. Default: `50`.
      - <a id="definitions/args/properties/limit_detection/properties/line/properties/max_line_gap"></a>**`max_line_gap`** *(integer)*: The maximum line gap in percentage of the image size used in the Hough transform. Default: `100`.
  - <a id="definitions/args/properties/colors"></a>**`colors`** *(integer)*: The number of colors in the png. Default: `0`.
  - <a id="definitions/args/properties/optipng"></a>**`optipng`** *(object)*: The optipng optimization tool configuration.
    - <a id="definitions/args/properties/optipng/properties/enabled"></a>**`enabled`** *(boolean)*: Use the optipng optimizer. Default: `true`.
  - <a id="definitions/args/properties/pngquant"></a>**`pngquant`** *(object)*: The pngquant optimization tool configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/pngquant/properties/enabled"></a>**`enabled`** *(boolean)*: Use the pngquant optimizer. Default: `true`.
    - <a id="definitions/args/properties/pngquant/properties/options"></a>**`options`** *(array)*: The pngquant options. Default: `["--force", "--speed=1", "--strip", "--quality=0-32"]`.
      - <a id="definitions/args/properties/pngquant/properties/options/items"></a>**Items** *(string)*
  - <a id="definitions/args/properties/exiftool"></a>**`exiftool`** *(object)*: The exiftool optimization tool configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/exiftool/properties/enabled"></a>**`enabled`** *(boolean)*: Use the exiftool optimizer. Default: `true`.
  - <a id="definitions/args/properties/ps2pdf"></a>**`ps2pdf`** *(object)*: The ps2pdf optimization tool configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/ps2pdf/properties/enabled"></a>**`enabled`** *(boolean)*: Use the ps2pdf optimizer (=> JPEG). Default: `true`.
  - <a id="definitions/args/properties/auto_rotate"></a>**`auto_rotate`** *(object)*: The auto rotate configuration.
    - <a id="definitions/args/properties/auto_rotate/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the auto rotate detected by Tesseract. Default: `true`.
  - <a id="definitions/args/properties/jpeg"></a>**`jpeg`** *(object)*: Convert images to JPEG configuration. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/jpeg/properties/enabled"></a>**`enabled`** *(boolean)*: Convert images to JPEG. Default: `true`.
    - <a id="definitions/args/properties/jpeg/properties/quality"></a>**`quality`** *(integer)*: The JPEG quality. Default: `90`.
  - <a id="definitions/args/properties/background_color"></a>**`background_color`** *(array)*: The background color. Default: `[255, 255, 255]`.
    - <a id="definitions/args/properties/background_color/items"></a>**Items** *(integer)*
  - <a id="definitions/args/properties/mask"></a>**`mask`** *(object)*: The mask configuration, the a is used to mask the image on crop and skew calculation. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/mask/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the mask. Default: `true`.
    - <a id="definitions/args/properties/mask/properties/auto_mask"></a>**`auto_mask`**: Refer to *[#/definitions/auto_mask](#definitions/auto_mask)*.
    - <a id="definitions/args/properties/mask/properties/additional_filename"></a>**`additional_filename`** *(string or null)*: An image file used to add on the mask.
  - <a id="definitions/args/properties/cut"></a>**`cut`** *(object)*: The cut configuration, a mask is used to definitively mask the source image. Default: `{"enabled": false}`.
    - <a id="definitions/args/properties/cut/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the cut. Default: `true`.
    - <a id="definitions/args/properties/cut/properties/auto_mask"></a>**`auto_mask`**: Refer to *[#/definitions/auto_mask](#definitions/auto_mask)*.
    - <a id="definitions/args/properties/cut/properties/additional_filename"></a>**`additional_filename`** *(string or null)*: An image file used to add on the mask.
  - <a id="definitions/args/properties/no_remove_to_continue"></a>**`no_remove_to_continue`** *(boolean)*: Don't wait for the deletion of the REMOVE_TO_CONTINUE file before exporting the PDF. Default: `false`.
  - <a id="definitions/args/properties/deskew"></a>**`deskew`** *(object)*: The deskew configuration.
    - <a id="definitions/args/properties/deskew/properties/min_angle"></a>**`min_angle`** *(number)*: The minimum angle to detect the image skew [degree]. Default: `-45`.
    - <a id="definitions/args/properties/deskew/properties/max_angle"></a>**`max_angle`** *(number)*: The maximum angle to detect the image skew [degree]. Default: `45`.
    - <a id="definitions/args/properties/deskew/properties/angle_derivation"></a>**`angle_derivation`** *(number)*: The step of angle to detect the image skew [degree]. Default: `0.1`.
    - <a id="definitions/args/properties/deskew/properties/sigma"></a>**`sigma`** *(number)*: Used in the `canny` function. Default: `3.0`.
    - <a id="definitions/args/properties/deskew/properties/num_peaks"></a>**`num_peaks`** *(integer)*: number of peaks we ask for. Default: `20`.
    - <a id="definitions/args/properties/deskew/properties/angle_pm_90"></a>**`angle_pm_90`** *(boolean)*: Detect an angle of +/- 90 degree, also +/- 45 degree. Default: `false`.
  - <a id="definitions/args/properties/rule"></a>**`rule`** *(object)*: Configuration of rule displayed in assisted split images.
    - <a id="definitions/args/properties/rule/properties/enabled"></a>**`enabled`** *(boolean)*: Default: `true`.
    - <a id="definitions/args/properties/rule/properties/minor_graduation_space"></a>**`minor_graduation_space`** *(integer)*: Default: `10`.
    - <a id="definitions/args/properties/rule/properties/major_graduation_space"></a>**`major_graduation_space`** *(integer)*: Default: `100`.
    - <a id="definitions/args/properties/rule/properties/lines_space"></a>**`lines_space`** *(integer)*: Default: `100`.
    - <a id="definitions/args/properties/rule/properties/minor_graduation_size"></a>**`minor_graduation_size`** *(integer)*: Default: `10`.
    - <a id="definitions/args/properties/rule/properties/major_graduation_size"></a>**`major_graduation_size`** *(integer)*: Default: `30`.
    - <a id="definitions/args/properties/rule/properties/graduation_color"></a>**`graduation_color`** *(array)*: Default: `[0, 0, 0]`.
      - <a id="definitions/args/properties/rule/properties/graduation_color/items"></a>**Items** *(integer)*
    - <a id="definitions/args/properties/rule/properties/lines_color"></a>**`lines_color`** *(array)*: Default: `[0, 0, 0]`.
      - <a id="definitions/args/properties/rule/properties/lines_color/items"></a>**Items** *(integer)*
    - <a id="definitions/args/properties/rule/properties/lines_opacity"></a>**`lines_opacity`** *(number)*: Default: `0.2`.
    - <a id="definitions/args/properties/rule/properties/graduation_text_font_filename"></a>**`graduation_text_font_filename`** *(string)*: Default: `"/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf"`.
    - <a id="definitions/args/properties/rule/properties/graduation_text_font_size"></a>**`graduation_text_font_size`** *(number)*: Default: `17`.
    - <a id="definitions/args/properties/rule/properties/graduation_text_font_color"></a>**`graduation_text_font_color`** *(array)*: Default: `[0, 0, 0]`.
      - <a id="definitions/args/properties/rule/properties/graduation_text_font_color/items"></a>**Items** *(integer)*
    - <a id="definitions/args/properties/rule/properties/graduation_text_margin"></a>**`graduation_text_margin`** *(integer)*: Default: `6`.
  - <a id="definitions/args/properties/rest_upload"></a>**`rest_upload`** *(object)*: Upload the final PDF via Paperless REST API.
    - <a id="definitions/args/properties/rest_upload/properties/enabled"></a>**`enabled`** *(boolean)*: Enable the upload of the PDF via REST API. Default: `false`.
    - <a id="definitions/args/properties/rest_upload/properties/api_url"></a>**`api_url`** *(string, required)*: The URL address of the REST API, usually http://server.name/api.
    - <a id="definitions/args/properties/rest_upload/properties/api_token"></a>**`api_token`** *(string, required)*: The API token.
  - <a id="definitions/args/properties/consume_folder"></a>**`consume_folder`** *(object)*: Send the final PDF to Paperless using the consume folder.
    - <a id="definitions/args/properties/consume_folder/properties/enabled"></a>**`enabled`** *(boolean)*: Enable using the consume folder. Default: `true`.
- <a id="definitions/contour"></a>**`contour`** *(object)*: The configuration used to find the contour.
  - <a id="definitions/contour/properties/min_box_size"></a>**`min_box_size`** *(number)*: The minimum box size to find the content [mm]. Default: `{"crop": 3, "empty": 10, "limit": 10}`.
  - <a id="definitions/contour/properties/min_box_black"></a>**`min_box_black`** *(number)*: The minimum black in a box on content find [%]. Default: `2`.
  - <a id="definitions/contour/properties/contour_kernel_size"></a>**`contour_kernel_size`** *(number)*: The block size used in a box on content find [mm]. Default: `1.5`.
  - <a id="definitions/contour/properties/threshold_block_size"></a>**`threshold_block_size`** *(number)*: The block size used in a box on threshold for content find [mm]. Default: `1.5`.
  - <a id="definitions/contour/properties/threshold_value_c"></a>**`threshold_value_c`** *(number)*: A variable used on threshold, should be low on low contrast image, used in a box on content find on witch one we will crop. Default: `70`.
